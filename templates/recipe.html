{% extends 'base.html' %}

{% block title %}
{{ recipe.recipe_name }}
{% endblock %}

{% block content %} 
    {% with messages = get_flashed_messages() %}
  {% if messages %}
    <div>
    {% for message in messages %}
      <li>{{ message }}</li>
    {% endfor %}
    </div>
  {% endif %}
{% endwith %}
<a href="{{ url_for('get_recipes') }}" class="btn btn-warning"><span class="fas fa-search"> Browse recipes </span></a>
    <!--with image and account buttons-->
    
 <div class="row"><h3> {{ recipe.recipe_name }} </h3></div>
   <div class="row"><span class="fas fa-user"><span class="d-none d-lg-block d-lg-block">Author:</span> {{ recipe.author_name }}</span></div>
 <div class="row"> 
     <div class="col-md-9 col-lg-9 col-sm-12">
         <img  height="400" src="{{ url_for('static', filename=recipe.image_url) }}"></img>
    </div>
     <div class="col-md-2 col-lg-2 col-sm-2">
         <a class="btn  btn-success mr-2" href="{{ url_for('give_up', recipe_id=recipe._id) }}">
             <span class="fas fa-thumbs-up"><span class="d-none d-lg-block d-lg-block">Up</span></span></a>Upvotes: {{ recipe.upvotes }}
         {% if session['logged_in'] %}
    {% if already_got %}
    <h5><span class="badge badge-success">In your cookbook</span></h5>
    {% if owned %}
    <a class="btn btn-warning" href="{{ url_for('edit_recipe', recipe_id=recipe._id, owned=owned) }}">Edit</a>
    <a class="btn btn-danger" href="{{ url_for('remove_recipe', recipe_id=recipe._id, owned=owned) }}">Remove</a>
    {% else %}
    <a class="btn btn-danger" href="{{ url_for('remove_recipe', recipe_id=recipe._id, owned=owned) }}">Unpin</a>
    {% endif %}
    {% elif not already_got %}
    <a class="btn btn-warning" href="{{ url_for('pin_recipe', recipe_id = recipe._id, recipe_title = recipe.recipe_name) }}">
        <span class="fas fa-map-pin"><span class="d-none d-lg-block d-lg-block">Pin to your cookbook</span></a>
    {% endif %}
    {% endif %}
    </div>
</div>
    
    <div class="row">
        <div class="col-sm-4"><span class="fas fa-cookie-bite"><span class="d-none d-lg-block d-lg-block">Dish type:</span> {{ recipe.dish_type }}</span></div>
        <div class="col-sm-4"><span class="fas fa-clock"><span class="d-none d-lg-block d-lg-block">Cooking time: </span>{{ recipe.cooking_time }}</span> </div>
        <div class="col-sm-4"><span class="fas fa-magic"><span class="d-none d-lg-block d-lg-block">Difficulty: </span>{{ recipe.difficulty }}</span></div>
    </div>
    
<div class="container">

   
    <ul>
        {% for ingredient in recipe.ingredients_list %}
        <li>{{ ingredient }}</li>
        {% endfor %}
    </ul>

    <h3>Preparation:</h3>
    <ol>

        {% for step in recipe.preparation_steps_list %}
        <li>{{ step }}</li>
        {% endfor %}

    </ol>

    
    <!--row for buttons-->

</div>
{% endblock %} 